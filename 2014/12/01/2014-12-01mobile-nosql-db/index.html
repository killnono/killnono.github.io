<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="支持资料Android Arsenal 站点关于几个Nosql的介绍.

Realm.
SnappyDB.
SimpleNoSql.
couchbase

Why Use Nosql on Moblie Platform说到在我们的mobile应用中使用Nosql需求: 

第一是需要做数据缓存.
第二点是server使用的MongoDB.
第三点其实和第一点有关联，因为服务端使用的是Docume">
<meta property="og:type" content="article">
<meta property="og:title" content="浅谈 NoSql for Android platform">
<meta property="og:url" content="http://yoursite.com/2014/12/01/2014-12-01mobile-nosql-db/index.html">
<meta property="og:site_name" content="Dev">
<meta property="og:description" content="支持资料Android Arsenal 站点关于几个Nosql的介绍.

Realm.
SnappyDB.
SimpleNoSql.
couchbase

Why Use Nosql on Moblie Platform说到在我们的mobile应用中使用Nosql需求: 

第一是需要做数据缓存.
第二点是server使用的MongoDB.
第三点其实和第一点有关联，因为服务端使用的是Docume">
<meta property="og:updated_time" content="2015-12-15T05:48:06.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="浅谈 NoSql for Android platform">
<meta name="twitter:description" content="支持资料Android Arsenal 站点关于几个Nosql的介绍.

Realm.
SnappyDB.
SimpleNoSql.
couchbase

Why Use Nosql on Moblie Platform说到在我们的mobile应用中使用Nosql需求: 

第一是需要做数据缓存.
第二点是server使用的MongoDB.
第三点其实和第一点有关联，因为服务端使用的是Docume">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'always',
    motion: true
  };
</script>

  <title> 浅谈 NoSql for Android platform | Dev </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Dev</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                浅谈 NoSql for Android platform
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-01T00:00:00+08:00" content="2014-12-01">
              2014-12-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android-nosql-realm-couchbase/" itemprop="url" rel="index">
                    <span itemprop="name">android,nosql,realm,couchbase</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h3 id="u652F_u6301_u8D44_u6599"><a href="#u652F_u6301_u8D44_u6599" class="headerlink" title="支持资料"></a>支持资料</h3><p><a href="https://android-arsenal.com/tag/155" target="_blank" rel="external">Android Arsenal 站点关于几个Nosql的介绍.</a></p>
<ul>
<li>Realm.</li>
<li>SnappyDB.</li>
<li>SimpleNoSql.</li>
<li>couchbase</li>
</ul>
<h3 id="Why_Use_Nosql_on_Moblie_Platform"><a href="#Why_Use_Nosql_on_Moblie_Platform" class="headerlink" title="Why Use Nosql on Moblie Platform"></a>Why Use Nosql on Moblie Platform</h3><p>说到在我们的mobile应用中使用Nosql需求: </p>
<ol>
<li><strong>第一是需要做数据缓存</strong>.</li>
<li><strong>第二点是server使用的MongoDB</strong>.</li>
<li><strong>第三点其实和第一点有关联，因为服务端使用的是Document(文档)模型数据存储，请求拉回到移动端时,若使用同样的Nosql数据库格式，就基本无需改动直接存储</strong>  </li>
</ol>
<p>为了最少的对本地缓存数据做数据库设计和建模，就是使用和服务端类似的Nosql来存储数据。<br>其实本来是想使用sharepreference或是文本来做轻量级的缓存。但是考虑到在数据更新和查询时的效率（读一条文档需要read整个文本或是记录集等).</p>
<p>综合的来说:</p>
<ol>
<li>保持客户端和服务端数据存储模型的统一性,无需在设计关系型数据库模型(便洁)。</li>
<li>相对来说直接文本和偏好存储，毕竟专业的nosql数据库具有更好更效率的数据操作。 </li>
</ol>
<h3 id="u5173_u4E8E_u76EE_u524D_u53EF_u7528_u7684_u51E0_u4E2ANosql_u6570_u636E_u7684_u6982_u8FF0"><a href="#u5173_u4E8E_u76EE_u524D_u53EF_u7528_u7684_u51E0_u4E2ANosql_u6570_u636E_u7684_u6982_u8FF0" class="headerlink" title="关于目前可用的几个Nosql数据的概述"></a>关于目前可用的几个Nosql数据的概述</h3><h5 id="Reaml"><a href="#Reaml" class="headerlink" title="Reaml"></a><strong>Reaml</strong></h5><hr>
<p> Realm ,支持Android和IOS+OSX，Realm for Android 2014.9.30,Realm相对来来说可能算是比较新的一个数据库框架。以Object或是Array形式对数据序列化存储，因为其早期开发的是IOS版本针对coredata存储的改进，所以基本概念中又很多ORM的感觉。<br> 根据<a href="http://realm.io/docs/java/0.78.0/" target="_blank" rel="external">Realm的官方文档</a>教程实践时一般会出现几个问题。  </p>
 <figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused <span class="keyword">by</span>: io.realm.exceptions.RealmException: Could <span class="keyword">not</span> find <span class="keyword">the</span> generated proxy  <span class="type">class</span>: Annotation processor may <span class="keyword">not</span> have been executed.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>官方FAQ:<br>What does the exception ‘Annotation processor may not have been executed.’ mean?<br>During compilation of your app, the model classes are processed and proxy classes are generated. If this annotation process fails, the proxy classes or their methods cannot be found. When your app begins running, it Realm will throw exception with message ‘Annotation processor may not have been executed.’. You may see this in case you use Java 6 as it doesn’t support inheriting annotations. You then have to add @RealmClass before your models. Otherwise it can often be solved by removing/cleaning all generated or intermediate files and rebuild.<br>简单的说就是jdk&lt;7的情况下会出现该问题，需要在realmObject前添加注解@RealmClass.</p>
</blockquote>
<p>接下来可能会出现的问题是</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">io<span class="class">.realm</span><span class="class">.exceptions</span><span class="class">.RealmMigrationNeededException</span>: Field <span class="string">'name'</span> not found <span class="keyword">for</span> type <span class="string">'YourBean'</span></span><br></pre></td></tr></table></figure>
<p>卸载下app清除旧的realmdb，重新运行就ok了。</p>
<p>Reaml的Android版本出的时间不久,他更像定义了一个Model的持久化框架,从对需要持久化的对象需要集成reaml的类，规范和注解的加入。对于稳定性来说,通用功能和常规的数据存储上基本没有问题.<br>官网的有很好的支持文档以及github的star和维护活跃度都是很高。</p>
<p>Tips:<br>Realm和Gson配合使用导致Gson resolve StackOverflowError；<br>官方解决  </p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Gson gson = <span class="keyword">new</span> GsonBuilder()</span><br><span class="line">                .setExclusionStrategies(<span class="keyword">new</span> ExclusionStrategy() &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="annotation">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">shouldSkipField</span><span class="params">(FieldAttributes f)</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> f.getDeclaringClass().equals(RealmObject.class);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="annotation">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">shouldSkipClass</span><span class="params">(Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .create();</span><br><span class="line">        String json = <span class="string">"&#123; name : 'John', email : 'john@corporation.com' &#125;"</span>;</span><br><span class="line">        User user = gson.fromJson(json, User.class);</span><br></pre></td></tr></table></figure>
<p>但是对于比较复杂的数据存储，比如需要支持对象里面包涵对象，该类也需要是先realmobject;比如list类型的需要是使用reaml提供的reamllist容器。</p>
<h5 id="SnappyDB"><a href="#SnappyDB" class="headerlink" title="SnappyDB"></a><strong>SnappyDB</strong></h5><hr>
<p>简单粗暴的kv存储模式，可以直接存储一个对象（其机制会帮助你序列化）.假设我有一个同类型的对象数据集，<br>那么只能以array形式存储；查询的时候目前只能根据key值来读取，假设我只需要读取array集合里的某个对象，<br>那么会再取出整个array集合，然后再自己检索（目前从提供的简单的API来看只支持key查询,有兴趣的可以看看具体代码），个人觉得，是sharepreference的一个加强版，从他测试的数据图来说，效率还可以,使用也很简单。</p>
<h5 id="couchbase"><a href="#couchbase" class="headerlink" title="couchbase"></a><strong>couchbase</strong></h5><hr>
<p>从mobile平台的nosql数据库来看，couchbase算比较提及的比较多。<br>支持android，java，ios等多个平台和语言,基于文档形式的存储。<br>但是,其存储接口提供还是需要转为map才能存储，不支持直接JSON存储,虽然它提到最后是已JSON格式存储，<br>但是暴露在API接口上接受的是map。<br>文档默认都会生成一个_id,_rev字段,这在做缓存时会导致和我们本身的一些数据中的_id冲突(目前来看是_id被它自动覆盖了,并且只会发生在文档的最外层的_id)。<br>简单的解决方案是，在需要设置自己的_id时，在创建Document时使用 </p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Document <span class="built_in">document</span> = database.getDocument(<span class="string">"myid2123"</span>);</span><br></pre></td></tr></table></figure>
<p>基于自定义的_id来获取或创建一个Document,也就可以实现默认_id带来的问题，<br>当让前提是我们设计定义_id是需要有唯一性的。</p>
<p>couchbase基本使用步骤:  </p>
<ul>
<li>step1:根据上下文获取一个Manager</li>
</ul>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">manager = <span class="keyword">new</span> Manager(<span class="keyword">new</span> AndroidContext(mContext), Manager.DEFAULT_OPTIONS);</span><br><span class="line">`<span class="javascript"></span>``<span class="javascript"></span>`  </span><br><span class="line"></span><br><span class="line">+ <span class="attribute">step2</span>:通过指定的数据库名获取指定数据库</span><br></pre></td></tr></table></figure>
<p>this.db = manager.getDatabase(“my-database”);</p>
<pre><code>
+ step3:创建一条记录写入数据库
</code></pre><p>Map<string, object=""> properties = new HashMap<string, object="">();<br>properties.put(“type”, “list”);<br>properties.put(“title”, title);<br>properties.put(“created_at”, currentTimeString);<br>properties.put(“owner”, “profile:” + userId);<br>properties.put(“members”, new<br>ArrayList<string>());<br>Document document = database.createDocument();<br>document.putProperties(properties);<br> ````  </string></string,></string,></p>
<p>具体的深度则可以考虑如何处理并发,锁机制,索引，视图等概念。</p>
<h5 id="SimpleNoSql"><a href="#SimpleNoSql" class="headerlink" title="SimpleNoSql"></a><strong>SimpleNoSql</strong></h5><hr>
<p>略，直接看<a href="https://github.com/Jearil/SimpleNoSQL" target="_blank" rel="external">其github和文档</a></p>
</span>
      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/01/17/2015-01-17-android_ui_fit_baseline/" rel="prev" title="[未完成]如何做androidUI适配的初期工作">
                [未完成]如何做androidUI适配的初期工作 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


        </div>

        


        
  <div class="comments" id="comments">
    
  </div>


      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/uploads/avatar.jpeg" alt="kill nono" itemprop="image"/>
          <p class="site-author-name" itemprop="name">kill nono</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#u652F_u6301_u8D44_u6599"><span class="nav-number">1.</span> <span class="nav-text">支持资料</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Why_Use_Nosql_on_Moblie_Platform"><span class="nav-number">2.</span> <span class="nav-text">Why Use Nosql on Moblie Platform</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#u5173_u4E8E_u76EE_u524D_u53EF_u7528_u7684_u51E0_u4E2ANosql_u6570_u636E_u7684_u6982_u8FF0"><span class="nav-number">3.</span> <span class="nav-text">关于目前可用的几个Nosql数据的概述</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Reaml"><span class="nav-number">3.0.1.</span> <span class="nav-text">Reaml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SnappyDB"><span class="nav-number">3.0.2.</span> <span class="nav-text">SnappyDB</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#couchbase"><span class="nav-number">3.0.3.</span> <span class="nav-text">couchbase</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SimpleNoSql"><span class="nav-number">3.0.4.</span> <span class="nav-text">SimpleNoSql</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kill nono</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    motionMiddleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');
      if (CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    };
  });
</script>



  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
